<html>
  <head>
    <title>city</title>
    <style>
      @keyframes radical {
        0% {transform: rotate3d(1, 1, 1, 0deg);}
      100% {transform: rotate3d(1, 1, 1, 360deg);}
      }

      @keyframes perspec {
        0% {perspective: 	500px;}
        50% {perspective: 260px;}
        100% {perspective: 500px;}
      }

      @keyframes perspec2 {
        0% {transform: rotateX(2deg);}
        50% {transform: rotateX(-13deg);}
        100% {transform: rotateX(2deg);}
      }

      @keyframes scroll {
        0% {background-position: 0px 0px;}
        100% {background-position: 400px 0px;}
      }

      @keyframes rotate {
        0% {transform: rotateZ(10deg);}
        100% {transform: rotateZ(-10deg);}
      }

      body {
        background-color: green;
      }

      body * {
        position: absolute;
        transform-style: preserve-3d;
      }

      #page {
        width: 97%;
        height: 90%;
        background-color: lightgreen;
        left: 2%;
        top: 15px;
        perspective: 300px;
        animation: rotate 0s linear alternate-reverse infinite;
        transform-style: preserve-3d;
        perspective-origin: 50% 50%;
        overflow: scroll !important;
        transform-style: preserve-3d;
      }

      #extreme {
        top: 0px;
        z-index: 100;
        font-family: "Comic Sans MS", "Comic Sans", cursive;
        animation: radical 4s linear infinite;
        transform-style: flat;
      }

      .door {
        background-image: url('images/foreground/door.png');
        background-size: 100% 100%;
      }

      * {
        transform-style: preserve-3d;
      }

      .building * {
		transform-style: preserve-3d;
		z-index: 1;
      }
	  
    .building {
	  z-index: 1;
	  transform-style: preserve-3d;
	}
    </style>
    <script>
      function doorone() {
        window.location.href = "beach.html";
      }

      function doortwo() {
        window.location.href = "placeholder.html";
      }

      function doorthree() {
        window.location.href = "placeholder.html";
      }

      document.addEventListener('DOMContentLoaded', function() {
        buildingGenerator()
      }, false); //i could just do onload but i thought this was cooler


      var howfarbackeverythingis = -200
      var buildingCount = 0

      function buildingGenerator() {
        //buildingFactory(size X, size Y, height, offset X,  offset Y)
        buildingFactory(400, 400, 200, 100, 400)
        buildingFactory(300, 380, 180, 1000, 50)
        buildingFactory(300, 240, 180, 800, 850)
        buildingFactory(400, 500, 280, 80, 900) //one below the top one
        buildingFactory(300, 300, 250, 2000, 150)
        buildingFactory(300, 300, 200, 1600, 500)
        buildingFactory(300, 300, 200, 2000, 900)
        buildingFactory(300, 300, 400, 1700, 1400)
      }

      var floorgenerated = false;

      function buildingFactory(sizex, sizey, height, offsetx, offsety) {
        const building = document.createElement("div");
        const ceiling = document.createElement("div");
        const topwall = document.createElement("div");
        const leftwall = document.createElement("div");
        const rightwall = document.createElement("div");
        const bottomwall = document.createElement("div");
        const floor = document.createElement("div");
        const page = document.getElementById("page");

        ceiling.style.backgroundImage = "url('images/foreground/terrible concrete.jpeg')";
        ceiling.style.position = "absolute"
        ceiling.style.backgroundSize = "100% 100%";
        ceiling.style.transformStyle = "preserve-3d";
        ceiling.style.width = sizex + "px";
        ceiling.style.height = sizey + "px";
        ceiling.style.transform = "translate3d(" + (offsetx) + "px, " + (offsety) + "px, " + (howfarbackeverythingis + height) + "px) rotatex(0deg)"

        topwall.style.backgroundColor = "red"; //backup
        topwall.style.backgroundImage = "url('images/foreground/bricks.png')";
        topwall.style.position = "absolute"
        topwall.style.transformOrigin = "top";
        topwall.style.transformStyle = "preserve-3d";
        topwall.style.width = sizex + "px";
        topwall.style.height = height + "px";
        topwall.style.transform = "translate3d(" + (offsetx) + "px, " + (offsety) + "px, " + (howfarbackeverythingis) + "px) rotatex(90deg)"
        leftwall.style.backgroundImage = "url('images/foreground/bricks.png')";

        leftwall.style.backgroundColor = "darkblue"; //backup
        leftwall.style.backgroundImage = "url('images/foreground/bricks.png')";
        leftwall.style.position = "absolute"
        leftwall.style.transformOrigin = "top";
        leftwall.style.transformStyle = "preserve-3d";
        leftwall.style.width = sizey + "px";
        leftwall.style.height = height + "px";
        leftwall.style.transform = "translate3d(" + (offsetx - sizey / 2) + "px, " + (offsety + sizey / 2) + "px, " + (howfarbackeverythingis) + "px) rotatex(90deg) rotatey(90deg)"

        rightwall.style.backgroundColor = "lightblue"; //backup
        rightwall.style.backgroundImage = "url('images/foreground/bricks.png')";
        rightwall.style.position = "absolute"
        rightwall.style.transformOrigin = "top";
        rightwall.style.transformStyle = "preserve-3d";
        rightwall.style.width = sizey + "px";
        rightwall.style.height = height + "px";
        rightwall.style.transform = "translate3d(" + ((offsetx - sizey / 2) + sizex) + "px, " + (offsety + sizey / 2) + "px, " + (howfarbackeverythingis) + "px) rotatex(90deg) rotatey(90deg)"

        bottomwall.style.backgroundColor = "yellow"; //backup
        bottomwall.style.backgroundImage = "url('images/foreground/bricks.png')";
        bottomwall.style.transformOrigin = "top";
        bottomwall.style.transformStyle = "preserve-3d";
        bottomwall.style.width = sizex + "px";
        bottomwall.style.height = height + "px";
        bottomwall.style.transform = "translate3d(" + (offsetx) + "px, " + (offsety + sizey) + "px, " + (howfarbackeverythingis) + "px) rotatex(90deg) rotatey(0deg)"

        building.style.position = "absolute"
        building.style.perspective = ""
        page.appendChild(building);
        building.setAttribute("id", "building"+buildingCount);
        building.setAttribute("class", "building");
        buildingCount += 1

        building.appendChild(ceiling);
        building.appendChild(topwall);
        building.appendChild(leftwall);
        building.appendChild(rightwall);
        building.appendChild(bottomwall);
        
        floor.style.backgroundImage = "url('images/foreground/asphalt.png')";
        floor.style.position = "absolute"
        floor.style.backgroundSize = "300px 300px";
        floor.style.transformStyle = "preserve-3d";
        floor.style.width = "10000px";
        floor.style.height = "10000px";
        floor.style.transform = "translate3d(-500px, -500px, " + (howfarbackeverythingis) + "px) rotatex(0deg)"
        
        if (floorgenerated == false) {
          page.appendChild(floor);
          floorgenerated = true;
        }
        
      }

    </script>
  </head>

  <body>
    <p id="extreme">city</p>
    <div id="page">
      <div class="door" id="doorone" onclick="doorone()"></div>
    </div>
  </body>
